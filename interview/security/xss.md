# XSS（Cross-Site Scripting）

跨網站指令碼攻擊（XSS）是一種安全漏洞，允許攻擊者在受害者的瀏覽器中執行惡意指令碼。
這些指令碼通常被注入到合法的網頁或應用程式中，目的是竊取資料、篡改內容或進一步攻擊其他使用者。

## 對攻擊者的優點
* 低技術門檻：XSS 攻擊相對簡單，只需注入一段惡意指令碼。
* 廣泛影響：一次成功的 XSS 攻擊可以影響大量使用者，特別是如果目標網站有大量訪客。
* 難以檢測：由於 XSS 攻擊通常在受害者的瀏覽器中執行，伺服器很難檢測到這種攻擊。

## 場景
* 用戶輸入未經處理：網站或應用程序未對用戶輸入進行適當的驗證和過濾，導致惡意指令碼被注入。
* 評論區或論壇：攻擊者在評論區、論壇或其他用戶生成內容的地方注入惡意指令碼。
* 電子郵件或消息：攻擊者通過電子郵件或消息發送包含惡意指令碼的鏈接，誘導受害者點擊。

## 類型
* 存儲型（Stored XSS）：惡意指令碼被永久存儲在目標伺服器上，例如在數據庫中。當其他用戶請求包含這些指令碼的頁面時，指令碼就會被執行。
* 反射型（Reflected XSS）：惡意指令碼通過 URL 或其他輸入參數被立即反射回用戶端並執行。這種攻擊通常需要攻擊者誘導受害者點擊惡意鏈接。
* 基於 DOM（DOM-based XSS）：惡意指令碼直接在用戶端被執行，並且不涉及伺服器的響應。這種攻擊利用了網頁的 Document Object Model (DOM)。


## 防禦措施
* 輸入驗證與過濾：對所有用戶輸入進行嚴格的驗證和過濾，確保不包含惡意指令碼。
* 輸出編碼：對用戶輸入的數據在顯示之前進行編碼，防止惡意指令碼被執行。
  * escape 函數用於將用戶輸入進行 HTML 編碼，從而防止 XSS 攻擊
* 使用安全的 API：避免使用會產生 XSS 漏洞的函數或方法，優先使用安全的 API。
* 內容安全政策（CSP）：配置內容安全政策，限制網頁可以加載的資源，以減少 XSS 攻擊的可能性。
## ref
* GPT