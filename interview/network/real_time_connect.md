# Real-Time Communication

# Polling
* 每隔一段時間client對server用http更新資料
* 優點
  * 實做簡單
  * 兼容性高，基於標準HTTP，幾乎所有設備都支援
* 缺點
  * 即使沒有新資料可用也會發請求，造成不必要的網路和server資源浪費
  * 高延遲：有新資料也要等下一次抓取才能用

# Long-Polling
* client對server發出http請求，不馬上返回資料，過一段時間後
  * 有資料就返回
  * 沒資料也告知client沒有更新
## 優點
* 減少不必要的請求: 與polling相比減少不必要的請求，server有新資料才回應
* 更低的延遲：與polling相比server一有資料就回應
* 兼容性高，基於標準HTTP，幾乎所有設備都支援
## 缺點
* 伺服器資源佔用: 伺服器必須保持大量的開放連接，以等待有新資料時才回應。
* 網絡延遲: 雖然比傳統 Polling 改善了延遲，但 Long-Polling 還是存在一定的延遲，因為客戶端需要重新發送新的 Long-Polling 請求來保持連接。

# Streaming
## 優點
* 低延遲: Streaming 技術允許伺服器持續將資料推送到客戶端，客戶端可以即時接收資料，實現低延遲的即時通訊。
* 適合持續數據流: Streaming 特別適合持續且高頻次的資料流
  * 如即時視頻流、股票市場數據、即時感應器數據等應用。
* 簡單的實現: Streaming 是基於 HTTP 協議的，並且支持單向資料流（伺服器到客戶端），相對容易實現，並且與現有的基礎設施兼容。
## 缺點
* 單向通訊: 傳統的 HTTP Streaming 是單向的，僅能實現從伺服器到客戶端的資料推送
  * 如果需要雙向通訊，必須搭配其他技術（如 Polling 或 WebSocket）。
* 伺服器資源消耗: 與 Long-Polling 相似，Streaming 也需要伺服器保持長時間的連接。
* 網絡環境要求高: 為了實現穩定的 Streaming，客戶端的網絡環境必須穩定且帶寬充足，否則可能導致數據丟失或延遲。

# WebSocket
* WebSocket 是一種在單一的 TCP 連接上提供全雙工（full-duplex）通訊的協議
* 一旦建立連接後，伺服器和客戶端可以相互發送消息，而不需要每次都重新建立連接
* WebSocket 連接是通過一次 HTTP 請求（稱為握手或 handshake）建立的。
  * 客戶端向伺服器發送一個升級請求，請求的頭信息中包含 Upgrade: websocket，告訴伺服器它希望建立一個 WebSocket 連接。
## 優點
* 雙向通訊: 提供了真正的全雙工通訊，客戶端和伺服器可以同時發送和接收資料，適合需要頻繁互動的應用場景。
* 低延遲和高效能: WebSocket 在建立連接後，客戶端和伺服器之間的通訊不需要經過 HTTP 請求和響應的開銷
  * 因此延遲低，並且比 Polling 和 Long-Polling 更高效。
* 持續連接: WebSocket 一旦連接建立後，可以保持持續的連接，避免了反覆建立和斷開連接的開銷，適合長時間持續連接的應用。
* 適用於高頻互動: 由於其高效的通訊機制，WebSocket 非常適合用於即時遊戲、聊天應用、即時協作工具等需要高頻互動的應用。
## 缺點
* 兼容性問題: 雖然現代瀏覽器和伺服器大多支持 WebSocket，但在某些老舊的瀏覽器或嚴格的網絡環境中可能不支持或需要額外配置。
* 更複雜的實現: WebSocket 的實現比 Polling 和 Long-Polling 更加複雜，特別是在處理連接的建立、斷開、重連等情況時，需要更多的開發和維護成本。
* 伺服器資源消耗: 雖然 WebSocket 是高效的，但它依然需要伺服器保持大量的持續連接，這在高並發的場景下會增加伺服器資源的消耗。

# Server-Sent Events (SSE)
* 一種基於 HTTP 的技術，允許伺服器單向地將更新的資料推送給客戶端。
* 這意味著伺服器可以在同一個 HTTP 連接上持續發送事件，而客戶端會自動接收並處理這些事件。
## 特點
* 單向通訊: 伺服器到客戶端的單向資料流。
* 瀏覽器大多支持
* 易於實現

# HTTP/2 Push
* HTTP/2 Push 是 HTTP/2 協議中的一個特性，允許伺服器在客戶端請求之前主動推送資源到客戶端。
* 這主要是用來加速網頁資源的加載，而不是作為一般的即時通訊技術。


# ref
* [WebSocket 通訊協定簡介：比較 Polling、Long-Polling 與 Streaming 的運作原理](https://blog.gtwang.org/web-development/websocket-protocol/)